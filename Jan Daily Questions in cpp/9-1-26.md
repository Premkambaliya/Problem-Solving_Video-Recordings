# 865. Smallest Subtree with all the Deepest Nodes

**Date:** January 9, 2026  
**Difficulty:** Medium

## Problem Description
Given the root of a binary tree, return the smallest subtree such that it contains all the deepest nodes in the original tree.

## Solution

```cpp
class Solution {
public:
    int height(TreeNode* root) {
        if (!root) return 0;
        return 1 + max(height(root->left), height(root->right));
    }

    TreeNode* subtreeWithAllDeepest(TreeNode* root) {
        return solve(root);
    }

    TreeNode* solve(TreeNode* root) {
        if (!root) return nullptr;

        int lefthight = height(root->left);
        int righthight = height(root->right);

        if (lefthight == righthight) return root;
        return (lefthight > righthight) ? solve(root->left) : solve(root->right);
    }
};
```

## Complexity Analysis
- **Time Complexity:** O(nÂ²)
- **Space Complexity:** O(h) where h is tree height