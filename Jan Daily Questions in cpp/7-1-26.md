# 1339. Maximum Product of Splitted Binary Tree

**Date:** January 7, 2026  
**Difficulty:** Medium

## Problem Description
Given the root of a binary tree, split the binary tree into two subtrees by removing one edge such that the product of the sums of the subtrees is maximized.

## Solution

```cpp
class Solution {
public:
    long S = 0;  
    long mp = 1; 

    int totalsum(TreeNode* root) {
        if (root == NULL)
            return 0;
        int left = totalsum(root->left);
        int right = totalsum(root->right);
        int sum = root->val + left + right;
        return sum;
    }

    int find(TreeNode* root) {
        if(root == NULL) return 0;

        int left = find(root->left);
        int right = find(root->right);

        long subtree = root->val + left + right;
        long remain = S - subtree;

        mp = max(mp, remain * subtree);

        return subtree;
    }

    int maxProduct(TreeNode* root) {
        if (root == NULL)
            return 0;
        S = totalsum(root);
        mp = 1;
        find(root);
        return mp % 1000000007;
    }
};
```

## Complexity Analysis
- **Time Complexity:** O(n)
- **Space Complexity:** O(h) where h is tree height