# 3013. Divide an Array Into Subarrays With Minimum Cost II

**Date:** February 2, 2026
**Difficulty:** Hard

## Problem Description
You are given an integer array `nums` of length `n`, and two positive integers `k` and `dist`. The cost of an array is the value of its first element. You need to divide `nums` into `k` disjoint contiguous subarrays.
The difference between the index of the first element of the second subarray and the index of the first element of the kth subarray should be less than or equal to `dist`.
Return the minimum possible sum of the cost of these subarrays.

## Solution

```cpp
class Solution {
public:
    typedef pair<long long, long long> p;
    long long minimumCost(vector<int>& nums, int k, int dist) {
        int n = nums.size();
        set<p> kmin;
        set<p> remains;

        long long sum = 0;
        int i = 1;
        while (i - dist < 1) {
            kmin.insert({nums[i], i});
            sum += nums[i];
            if (kmin.size() > k - 1) {
                p temp = *kmin.rbegin();
                sum -= temp.first;
                remains.insert(temp);
                kmin.erase(temp);
            }
            i++;
        }

        long long result = LONG_MAX;
        while (i < n) {
            kmin.insert({nums[i], i});
            sum += nums[i];
            if (kmin.size() > k - 1) {
                p temp = *kmin.rbegin();
                sum -= temp.first;
                remains.insert(temp);
                kmin.erase(temp);
            }
            result = min(result, sum);

            p remove = {nums[i - dist], i - dist};
            if (kmin.count(remove)) {
                kmin.erase(remove);
                sum -= remove.first;
                if (!remains.empty()) {
                    p temp = *remains.begin();
                    kmin.insert(temp);
                    sum += temp.first;
                    remains.erase(temp);
                }
            } else {
                remains.erase(remove);
            }
            i++;
        }
        return nums[0] + result;
    }
};
```